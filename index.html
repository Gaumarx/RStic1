<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Package to manage STICS simulations https://github.com/SticsRPacks/SticsOnR • SticsOnR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="A Package to manage STICS simulations https://github.com/SticsRPacks/SticsOnR">
<meta property="og:description" content="SticsOnR allow users to set simulations (USM) as javaSTICS or Stics do, to run them in different folders on in sequential,
  and to import the outputs from R.">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">SticsOnR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/Changing_java_version_linux.html">Changing Java version procedure under linux</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/SticsRPacks/SticsOnR/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/SticsRPacks/SticsOnR">SticsOnR</a></span><span class="op">)</span>
<span class="co">#&gt; Learn SticsOnR at: https://SticsRPacks.github.io/SticsOnR</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/SticsRPacks/SticsRFiles">SticsRFiles</a></span><span class="op">)</span>
<span class="co">#&gt; Learn SticsRFiles at: https://SticsRPacks.github.io/SticsRFiles</span></code></pre></div>
<div id="sticsonr-the-r-package-for-the-stics-model-" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#sticsonr-the-r-package-for-the-stics-model-" class="anchor"></a>SticsOnR: The R package for the <a href="https://www6.paca.inrae.fr/stics_eng/">STICS</a> model <img src="reference/figures/logo.png" alt="logo" width="150" align="right">
</h1></div>
<!-- badges: start -->

<p><a href="https://github.com/SticsRPacks/SticsOnR/actions"><img src="https://github.com/SticsRPacks/SticsOnR/workflows/R-CMD-check/badge.svg" alt="R build status"></a></p>
<p><a href="https://codecov.io/gh/SticsRPacks/SticsOnR?branch=master"><img src="https://codecov.io/gh/SticsRPacks/SticsOnR/branch/master/graph/badge.svg" alt="Codecov test coverage"></a> <!-- badges: end --></p>
<p>The goal of SticsOnR is to perform simulations of the Stics model, downloadable with its graphical user interface from <a href="https://www6.paca.inra.fr/stics_eng/Download" class="uri">https://www6.paca.inra.fr/stics_eng/Download</a>.</p>
<p>If you want to be notified when a new release of this package is made, you can tick the Releases box in the “Watch / Unwatch =&gt; Custom” menu at the top right of <a href="https://github.com/SticsRPacks/SticsOnR">this page</a>.</p>
<div id="prerequisites-and-technical-tips" class="section level2">
<h2 class="hasAnchor">
<a href="#prerequisites-and-technical-tips" class="anchor"></a>Prerequisites and technical tips</h2>
<div id="javastics-software" class="section level3">
<h3 class="hasAnchor">
<a href="#javastics-software" class="anchor"></a>JavaStics software</h3>
<p>JavaStics must be installed and the minimal version is version 1.41.</p>
<p>The last distribution version for Stics is downloadable <a href="https://www6.paca.inrae.fr/stics_eng/Download">here</a>.</p>
<p>The installation process only constists of unzipping the JavaStics archive.</p>
</div>
<div id="under-linux-operating-systems" class="section level3">
<h3 class="hasAnchor">
<a href="#under-linux-operating-systems" class="anchor"></a>Under linux operating systems</h3>
<div id="java-version" class="section level4">
<h4 class="hasAnchor">
<a href="#java-version" class="anchor"></a>Java version</h4>
<p>For using the JavaStics software (GUI and command line interface) under a <code>linux</code> operating system, the java version must be at most the Java 8 version.</p>
<p>For recent distributions on which a higher version is installed some manipulations have to be done.</p>
<p>A description is given <a href="https://sticsrpacks.github.io/SticsOnR/articles/Changing_java_version_linux.html">here</a> on how to fix it for using the R package (i.e. underlying JavaStics command line interface).</p>
</div>
<div id="system-libraries" class="section level4">
<h4 class="hasAnchor">
<a href="#system-libraries" class="anchor"></a>System libraries</h4>
<p>For the linux operating system, the SticsOnR package may require to install an <code>xslt</code> library.</p>
<p>If the SticsOnR installation fails, and the <code>xslt</code> library is missing, the error message indicates what is the name of the xslt library to be installed (according to the common linux distributions). For example, for the Ubuntu or Debian OS <code>libxslt1-dev</code> must be installed.</p>
</div>
<div id="filesdirectories-paths-syntax" class="section level4">
<h4 class="hasAnchor">
<a href="#filesdirectories-paths-syntax" class="anchor"></a>Files/directories paths syntax</h4>
<p>Using the <code><a href="https://rdrr.io/r/base/tilde.html">~</a></code> in files or directories paths may cause errors in SticsOnR functions. So, it is safer for the moment to use absolute paths. This will be fixed in the future versions.</p>
</div>
<div id="remote-installation-tools" class="section level4">
<h4 class="hasAnchor">
<a href="#remote-installation-tools" class="anchor"></a>Remote installation tools</h4>
<p>For installing packages from the Github site an additional package must be installed. One can use either <code>devtools</code> or <a href="https://github.com/r-lib/remotes#readme"><code>remotes</code></a></p>
<p>For <code>devtools</code>, installation requires system dependent tools. They must be installed first.</p>
<ul>
<li>For Windows<br>
RTools must be installed using the last installer from <a href="https://cran.r-project.org/bin/windows/Rtools">here</a>
</li>
<li>For linux<br>
Development tools must be installed first, like the <code>build-essentials</code> package for a Debian like distribution for example.</li>
</ul>
<p>Then the <code>devtools</code> package can be installed using:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">install</span><span class="fu">:::</span><span class="fu">packages</span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></code></pre></div>
<p>For <code>remotes</code>, it can be directly installed using:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">install</span><span class="fu">:::</span><span class="fu">packages</span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></code></pre></div>
</div>
</div>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<div id="recommended-installation-sticsrpacks" class="section level3">
<h3 class="hasAnchor">
<a href="#recommended-installation-sticsrpacks" class="anchor"></a>Recommended installation: <code>SticsRPacks</code>
</h3>
<p>The best way to install the packages from <code>SticsRPacks</code>, from which <code>SticsOnR</code> is part of, is by installing the <code>[SticsRPacks]</code> package:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"SticsRPacks/SticsRPacks"</span><span class="op">)</span></code></pre></div>
<ul>
<li>With <code>remotes</code>
</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("remotes")</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"SticsRPacks/SticsRPacks"</span><span class="op">)</span></code></pre></div>
<p>The package will install the packages for you at the last release version.</p>
</div>
<div id="other-way-install-each-package-independently" class="section level3">
<h3 class="hasAnchor">
<a href="#other-way-install-each-package-independently" class="anchor"></a>Other way: install each package independently</h3>
<div id="sticsonr" class="section level4">
<h4 class="hasAnchor">
<a href="#sticsonr" class="anchor"></a>SticsOnR</h4>
<p>The package installation can be remotely done directly from <a href="https://github.com/">GitHub</a> using either <code>devtools</code> or the lightweight <code>remote</code> one package</p>
<p>The last release version can be installed using:</p>
<ul>
<li>With <code>devtools</code>
</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"SticsRPacks/SticsOnR@*release"</span><span class="op">)</span></code></pre></div>
<ul>
<li>With <code>remotes</code>
</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("remotes")</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span><span class="op">(</span><span class="st">"SticsRPacks/SticsOnR@*release"</span><span class="op">)</span></code></pre></div>
<p>Normaly, all the package dependencies will be installed for CRAN packages.</p>
</div>
<div id="sticsrfiles" class="section level4">
<h4 class="hasAnchor">
<a href="#sticsrfiles" class="anchor"></a>SticsRFiles</h4>
<p><code>SticsRFiles</code> must be installed manually using the above syntax, just replacing <strong>SticsOnR</strong> with <strong>SticsRFiles</strong>.</p>
</div>
</div>
</div>
<div id="examples" class="section level2">
<h2 class="hasAnchor">
<a href="#examples" class="anchor"></a>Examples</h2>
<p>Here are basic examples which show you how to run the model either from a R model interface or a JavaStics (command line) one. More complete examples will be detailed in a specific documentation later.</p>
<div id="running-the-model-using-javastics-command-line-interface-recommended" class="section level3">
<h3 class="hasAnchor">
<a href="#running-the-model-using-javastics-command-line-interface-recommended" class="anchor"></a>Running the model using JavaStics command line interface (recommended)</h3>
<p>The JavaStics installation folder (for example, JavaSTICS-1.41-stics-9.1) contains an <code>example</code> workspace folder with a set of runnable usms.</p>
<p>For running simulations from it, we can use the <code><a href="reference/run_javastics.html">run_javastics()</a></code> function.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># Specifying the JavaStics folder</span>
<span class="va">javastics_path</span> <span class="op">&lt;-</span> <span class="st">"/path/to/JavaSTICS-1.41-stics-9.1"</span>

<span class="co"># Specifying a workspace as a subfolder of JavaStics </span>
<span class="va">workspace_path</span> <span class="op">&lt;-</span> <span class="st">"example"</span>

<span class="co"># or an absolute path to an external folder</span>
<span class="co"># workspace_path &lt;- "/path/to/javastics/workspace"</span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Running specific usms from the workspace</span>
<span class="fu"><a href="reference/run_javastics.html">run_javastics</a></span><span class="op">(</span><span class="va">javastics_path</span>, <span class="va">workspace_path</span>, usms_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"banana"</span>,<span class="st">"wheat"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; v Using stics 'modulostics' (exe: 'stics_modulo.exe')</span>
<span class="co">#&gt; [1] "banana"</span>
<span class="co">#&gt; [1] "wheat"</span>

<span class="co"># Running all usms contained in the workspace </span>
<span class="fu"><a href="reference/run_javastics.html">run_javastics</a></span><span class="op">(</span><span class="va">javastics_path</span>, <span class="va">workspace_path</span><span class="op">)</span>
<span class="co">#&gt; v Using stics 'modulostics' (exe: 'stics_modulo.exe')</span>
<span class="co">#&gt; [1] "SugarCane"</span>
<span class="co">#&gt; [1] "potato"</span>
<span class="co">#&gt; [1] "banana"</span>
<span class="co">#&gt; [1] "sorghum"</span>
<span class="co">#&gt; [1] "barley"</span>
<span class="co">#&gt; [1] "sugarbeet"</span>
<span class="co">#&gt; [1] "wheat"</span>
<span class="co">#&gt; [1] "maize"</span>
<span class="co">#&gt; [1] "soybean"</span>
<span class="co">#&gt; [1] "lettuce"</span>
<span class="co">#&gt; [1] "tomato"</span>
<span class="co">#&gt; [1] "DurumWheat"</span>
<span class="co">#&gt; [1] "rapeseed"</span>
<span class="co">#&gt; [1] "sunflower"</span>
<span class="co">#&gt; [1] "grass"</span>
<span class="co">#&gt; [1] "BareSoil"</span>
<span class="co">#&gt; [1] "demo_Wheat1"</span>
<span class="co">#&gt; [1] "demo_BareSoil2"</span>
<span class="co">#&gt; [1] "demo_maize3"</span>
<span class="co">#&gt; [1] "DurumWheat_4years"</span>
<span class="co">#&gt; [1] "maize_4years"</span>
<span class="co">#&gt; [1] "strawberry"</span>
<span class="co">#&gt; [1] "pea"</span>
<span class="co">#&gt; [1] "vine"</span>
<span class="co">#&gt; [1] "fescue"</span>
<span class="co">#&gt; [1] "flax"</span>
<span class="co">#&gt; [1] "intercrop_pea_barley"</span>
<span class="co">#&gt; [1] "timothy"</span>
<span class="co">#&gt; [1] "DurumWheat_snow"</span>
<span class="co">#&gt; [1] "Turmeric"</span>
<span class="co">#&gt; [1] "cc_BristleOat"</span>
<span class="co">#&gt; [1] "cc_mustard"</span>
<span class="co">#&gt; [1] "cc_ItalianRyegrass"</span>
<span class="co">#&gt; [1] "cc_vetch"</span>
<span class="co">#&gt; [1] "cc_CrimsonClover"</span>
<span class="co">#&gt; [1] "proto_rice"</span>

<span class="co"># Getting information about execution:</span>
<span class="va">runs_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/run_javastics.html">run_javastics</a></span><span class="op">(</span><span class="va">javastics_path</span>, <span class="va">workspace_path</span>, usms_list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"banana"</span>,<span class="st">"wheat"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; v Using stics 'modulostics' (exe: 'stics_modulo.exe')</span>
<span class="co">#&gt; [1] "banana"</span>
<span class="co">#&gt; [1] "wheat"</span>

<span class="va">runs_info</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; [[1]]$name</span>
<span class="co">#&gt; [1] "banana"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]]$error</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]]$message</span>
<span class="co">#&gt; [1] "0"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; [[2]]$name</span>
<span class="co">#&gt; [1] "wheat"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]$error</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]$message</span>
<span class="co">#&gt; [1] "0"</span></code></pre></div>
<p>In the returned information, the error field name gives a list of messages from the JavaStics commandline interface. If any <code>Error</code> key word appears in a message, the corresponding simulation failed. But, at the moment it is impossible to identify what is the error’s origin. Things must be checked manually in the workspace, after running again the faulty usm (because the model input files are overwritten at each usms simulation).</p>
</div>
<div id="running-the-model-using-the-stics-executable-directly" class="section level3">
<h3 class="hasAnchor">
<a href="#running-the-model-using-the-stics-executable-directly" class="anchor"></a>Running the model using the stics executable directly</h3>
<p>We need for that a JavaStics folder and a directory with text input files for Stics, or a folder containing individual sub-directories for usms.</p>
<p>These directories can be generated using the <code>[SticsRFiles::gen_usms_xml2txt()]</code> function from the <strong>SticsRFiles</strong> package, by converting automatically XML files to Stics input text files. See the documentation <a href="https://sticsrpacks.github.io/SticsRFiles/articles/Generating_Stics_text_files.html">here</a>.</p>
<p>Example of use:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Generating files for all the usms contained in the workspace</span>
<span class="fu">SticsRFiles</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/SticsRFiles/man/gen_usms_xml2txt.html">gen_usms_xml2txt</a></span><span class="op">(</span><span class="va">javastics_path</span>, workspace_path <span class="op">=</span> <span class="va">workspace_path</span>, target_path <span class="op">=</span> <span class="va">output_path</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p>The <code><a href="reference/run_stics.html">run_stics()</a></code> function can be used as follows with one folder or multiple sub-folders.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Specifying the Stics executable file path</span>

<span class="co"># for windows</span>
<span class="co"># stics_path &lt;- file.path(javastics_path,"bin","stics_modulo.exe")</span>
<span class="co"># for linux</span>
<span class="co"># stics_path &lt;- file.path(javastics_path,"bin","stics_modulo")</span>
<span class="co"># for Mac</span>
<span class="co"># stics_path &lt;- file.path(javastics_path,"bin","stics_modulo_mac")</span>

<span class="co"># Specifying a directory containing Stics input files</span>
<span class="co"># For example reusing a generated sub-directory in the previous section</span>
<span class="co"># of the document</span>
<span class="co"># Running one usm</span>
<span class="va">files_dir_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">output_path</span>,<span class="st">"banana"</span><span class="op">)</span>
<span class="fu"><a href="reference/run_stics.html">run_stics</a></span><span class="op">(</span><span class="va">stics_path</span>, <span class="va">files_dir_path</span><span class="op">)</span>

<span class="co"># Specifying a root directory containing usms individual directories</span>
<span class="co"># For example reusing a generated directory in the previous section</span>
<span class="co"># of the document</span>
<span class="co"># Running two usms</span>
<span class="fu"><a href="reference/run_stics.html">run_stics</a></span><span class="op">(</span><span class="va">stics_path</span>, <span class="va">output_path</span>, usm_dir_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"banana"</span>,<span class="st">"wheat"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Running all the usms defined in the sub-directories of output_path</span>
<span class="fu"><a href="reference/run_stics.html">run_stics</a></span><span class="op">(</span><span class="va">stics_path</span>, <span class="va">output_path</span>, usm_dir_names <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span>
<span class="co">#&gt; Warning in system2(command = command, args = com_args, stderr = TRUE, stdout</span>
<span class="co">#&gt; = TRUE): l'exécution de la commande '"D:/Home/sbuis/Documents/WORK/STICS/</span>
<span class="co">#&gt; JavaSTICS-1.41-stics-9.0/bin/stics_modulo" ' renvoie un statut 9</span>

<span class="co">#&gt; Warning in system2(command = command, args = com_args, stderr = TRUE, stdout</span>
<span class="co">#&gt; = TRUE): l'exécution de la commande '"D:/Home/sbuis/Documents/WORK/STICS/</span>
<span class="co">#&gt; JavaSTICS-1.41-stics-9.0/bin/stics_modulo" ' renvoie un statut 9</span>

<span class="co">#&gt; Warning in system2(command = command, args = com_args, stderr = TRUE, stdout</span>
<span class="co">#&gt; = TRUE): l'exécution de la commande '"D:/Home/sbuis/Documents/WORK/STICS/</span>
<span class="co">#&gt; JavaSTICS-1.41-stics-9.0/bin/stics_modulo" ' renvoie un statut 9</span>

<span class="co">#&gt; Warning in system2(command = command, args = com_args, stderr = TRUE, stdout</span>
<span class="co">#&gt; = TRUE): l'exécution de la commande '"D:/Home/sbuis/Documents/WORK/STICS/</span>
<span class="co">#&gt; JavaSTICS-1.41-stics-9.0/bin/stics_modulo" ' renvoie un statut 9</span>

<span class="co">#&gt; Warning in system2(command = command, args = com_args, stderr = TRUE, stdout</span>
<span class="co">#&gt; = TRUE): l'exécution de la commande '"D:/Home/sbuis/Documents/WORK/STICS/</span>
<span class="co">#&gt; JavaSTICS-1.41-stics-9.0/bin/stics_modulo" ' renvoie un statut 9</span>

<span class="co">#&gt; Warning in system2(command = command, args = com_args, stderr = TRUE, stdout</span>
<span class="co">#&gt; = TRUE): l'exécution de la commande '"D:/Home/sbuis/Documents/WORK/STICS/</span>
<span class="co">#&gt; JavaSTICS-1.41-stics-9.0/bin/stics_modulo" ' renvoie un statut 9</span>

<span class="co">#&gt; Warning in system2(command = command, args = com_args, stderr = TRUE, stdout</span>
<span class="co">#&gt; = TRUE): l'exécution de la commande '"D:/Home/sbuis/Documents/WORK/STICS/</span>
<span class="co">#&gt; JavaSTICS-1.41-stics-9.0/bin/stics_modulo" ' renvoie un statut 9</span>

<span class="co">#&gt; Warning in system2(command = command, args = com_args, stderr = TRUE, stdout</span>
<span class="co">#&gt; = TRUE): l'exécution de la commande '"D:/Home/sbuis/Documents/WORK/STICS/</span>
<span class="co">#&gt; JavaSTICS-1.41-stics-9.0/bin/stics_modulo" ' renvoie un statut 9</span>

<span class="co">#&gt; Warning in system2(command = command, args = com_args, stderr = TRUE, stdout</span>
<span class="co">#&gt; = TRUE): l'exécution de la commande '"D:/Home/sbuis/Documents/WORK/STICS/</span>
<span class="co">#&gt; JavaSTICS-1.41-stics-9.0/bin/stics_modulo" ' renvoie un statut 9</span>

<span class="co">#&gt; Warning in system2(command = command, args = com_args, stderr = TRUE, stdout</span>
<span class="co">#&gt; = TRUE): l'exécution de la commande '"D:/Home/sbuis/Documents/WORK/STICS/</span>
<span class="co">#&gt; JavaSTICS-1.41-stics-9.0/bin/stics_modulo" ' renvoie un statut 9</span>

<span class="co">#&gt; Warning in system2(command = command, args = com_args, stderr = TRUE, stdout</span>
<span class="co">#&gt; = TRUE): l'exécution de la commande '"D:/Home/sbuis/Documents/WORK/STICS/</span>
<span class="co">#&gt; JavaSTICS-1.41-stics-9.0/bin/stics_modulo" ' renvoie un statut 9</span>

<span class="co">#&gt; Warning in system2(command = command, args = com_args, stderr = TRUE, stdout</span>
<span class="co">#&gt; = TRUE): l'exécution de la commande '"D:/Home/sbuis/Documents/WORK/STICS/</span>
<span class="co">#&gt; JavaSTICS-1.41-stics-9.0/bin/stics_modulo" ' renvoie un statut 9</span>

<span class="co"># Getting returned information about stics runs</span>
<span class="va">runs_info</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/run_stics.html">run_stics</a></span><span class="op">(</span><span class="va">stics_path</span>, <span class="va">output_path</span>, usm_dir_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"banana"</span>,<span class="st">"wheat"</span><span class="op">)</span><span class="op">)</span>

<span class="va">runs_info</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; [[1]]$name</span>
<span class="co">#&gt; [1] "banana"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]]$error</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]]$message</span>
<span class="co">#&gt; [1] " numcult =            1"                           </span>
<span class="co">#&gt; [2] " The execution has been successfully accomplished."</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; [[2]]$name</span>
<span class="co">#&gt; [1] "wheat"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]$error</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]$message</span>
<span class="co">#&gt; [1] " numcult =            1"                           </span>
<span class="co">#&gt; [2] " The execution has been successfully accomplished."</span></code></pre></div>
</div>
<div id="advanced-simulations-parameterization" class="section level3">
<h3 class="hasAnchor">
<a href="#advanced-simulations-parameterization" class="anchor"></a>Advanced simulations parameterization</h3>
<p>A specific function <code><a href="reference/stics_wrapper.html">stics_wrapper()</a></code> is dedicated to manage simulations with a higher level of parameterization than what <code><a href="reference/run_stics.html">run_stics()</a></code> offers.</p>
<p>This <code><a href="reference/stics_wrapper.html">stics_wrapper()</a></code> function allows:</p>
<ul>
<li>Forcing the values of a set of parameters (common or specific values per USM)</li>
<li>Returning simulated daily outputs for each usm with possible dates and variables filtering</li>
<li>Parallelizing simulations, and displaying execution time</li>
<li>Run Usms in successive mode</li>
</ul>
<p>As the <code><a href="reference/run_stics.html">run_stics()</a></code> function, the <code><a href="reference/stics_wrapper.html">stics_wrapper()</a></code> operates on directories containing text stics input files.</p>
<div id="defining-simulations-options" class="section level4">
<h4 class="hasAnchor">
<a href="#defining-simulations-options" class="anchor"></a>Defining simulations options</h4>
<p>Simulation options can be fixed using the <code><a href="reference/stics_wrapper_options.html">stics_wrapper_options()</a></code> function. Both of them are mandatory: the model executable path and the directory path containing usms sub-directories with text input files.</p>
<p>A template is returned by the function when called with no arguments:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="reference/stics_wrapper_options.html">stics_wrapper_options</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; $javastics_path</span>
<span class="co">#&gt; [1] "unknown"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $stics_exe</span>
<span class="co">#&gt; [1] "unknown"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $data_dir</span>
<span class="co">#&gt; [1] "unknown"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $parallel</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $cores</span>
<span class="co">#&gt; [1] NA</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $time_display</span>
<span class="co">#&gt; [1] FALSE</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $verbose</span>
<span class="co">#&gt; [1] TRUE</span></code></pre></div>
<p>For the example, we will use the default stics model version shipping with JavaStics and the directory where individual usms input directories have been generated:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sim_options</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/stics_wrapper_options.html">stics_wrapper_options</a></span><span class="op">(</span>javastics_path <span class="op">=</span> <span class="va">javastics_path</span>, 
                                     data_dir <span class="op">=</span> <span class="va">output_path</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<p>By default, <code><a href="reference/stics_wrapper_options.html">stics_wrapper_options()</a></code> checks that <code>javastics_path</code>, <code>stics_exe</code> and <code>data_dir</code> exists.</p>
<p>There are different solutions if you need to use a custom version of stics:</p>
<ol>
<li>if it is already listed in the preference (e.g. added in JavaStics), simply provide its name (ID):</li>
</ol>
<!-- end list --><div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sim_options</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/stics_wrapper_options.html">stics_wrapper_options</a></span><span class="op">(</span>javastics_path <span class="op">=</span> <span class="va">javastics_path</span>, stics_exe <span class="op">=</span> <span class="st">"stics_custom"</span>,
                                     data_dir <span class="op">=</span> <span class="va">output_path</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<ol>
<li>if it is located in the bin directory of the JavaStics installation directory, provide the executable name:</li>
</ol>
<!-- end list --><div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sim_options</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/stics_wrapper_options.html">stics_wrapper_options</a></span><span class="op">(</span>javastics_path <span class="op">=</span> <span class="va">javastics_path</span>, stics_exe <span class="op">=</span> <span class="st">"stics_custom.exe"</span>,
                                     data_dir <span class="op">=</span> <span class="va">output_path</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
<ol>
<li>if it is located in any other folder, provide the full path to the executable name, and no need to use <code>javastics_path</code>:</li>
</ol>
<!-- end list --><div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sim_options</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/stics_wrapper_options.html">stics_wrapper_options</a></span><span class="op">(</span>stics_exe <span class="op">=</span> <span class="st">"path/to/stics_custom.exe"</span>,
                                     data_dir <span class="op">=</span> <span class="va">output_path</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div>
</div>
<div id="simple-simulations-cases" class="section level4">
<h4 class="hasAnchor">
<a href="#simple-simulations-cases" class="anchor"></a>Simple simulations cases</h4>
<ul>
<li>Without filtering usms or outputs</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/stics_wrapper.html">stics_wrapper</a></span><span class="op">(</span>model_options <span class="op">=</span> <span class="va">sim_options</span><span class="op">)</span></code></pre></div>
<ul>
<li>Filtering on usms list</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">usms_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"wheat"</span>, <span class="st">"pea"</span>, <span class="st">"maize"</span><span class="op">)</span>

<span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/stics_wrapper.html">stics_wrapper</a></span><span class="op">(</span>model_options <span class="op">=</span> <span class="va">sim_options</span>, sit_names <span class="op">=</span> <span class="va">usms_list</span><span class="op">)</span></code></pre></div>
<ul>
<li>Filtering outputs on variables</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">usms_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"wheat"</span>, <span class="st">"pea"</span>, <span class="st">"maize"</span><span class="op">)</span>

<span class="fu"><a href="reference/stics_wrapper.html">stics_wrapper</a></span><span class="op">(</span>model_options <span class="op">=</span> <span class="va">sim_options</span>, sit_names <span class="op">=</span> <span class="va">usms_list</span>, var_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"masec_n"</span>,<span class="st">"mafruit"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<ul>
<li>Filtering outputs on variables and dates for several USMs</li>
</ul>
<p>The argument <code>sit_var_dates_mask</code> must contain a named list (named by usms names) containing data.frames, as the sim_list element of the list returned by stics_wrapper (see here-after) or as observations data.</p>
<p>It defines a mask: stics_wrapper will return a result for each USM, variable and date that contains at least a value (i.e. different from NA) in the mask.</p>
<p>The stics_wrapper function returns a list that contains two elements: * error, a boolean indicating if an error occurs during the simulations, * sim_list, a named list of data.frames containing the simulated values for the requested USMS, variables and dates.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">obs_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/SticsRFiles/man/get_obs.html">get_obs</a></span><span class="op">(</span>workspace <span class="op">=</span> <span class="va">workspace_path</span>, usm_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"wheat"</span>, <span class="st">"maize"</span><span class="op">)</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="co"># Observations table for wheat</span>
<span class="va">obs_list</span><span class="op">$</span><span class="va">wheat</span>
<span class="co">#&gt;          Date lai_n masec_n HR_1 HR_2 HR_3 resmes AZnit_1 AZnit_2 AZnit_3</span>
<span class="co">#&gt; 1  1995-01-30  0.29    0.25   NA   NA   NA     NA      NA      NA      NA</span>
<span class="co">#&gt; 2  1995-02-03    NA      NA 21.1 18.8 12.4 133.26     3.1     2.9       4</span>
<span class="co">#&gt; 3  1995-02-07  0.37    0.31   NA   NA   NA     NA      NA      NA      NA</span>
<span class="co">#&gt; 4  1995-02-16  0.40    0.32   NA   NA   NA     NA      NA      NA      NA</span>
<span class="co">#&gt; 5  1995-02-24  0.45    0.40   NA   NA   NA     NA      NA      NA      NA</span>
<span class="co">#&gt; 6  1995-03-06  0.44    0.38   NA   NA   NA     NA      NA      NA      NA</span>
<span class="co">#&gt; 7  1995-03-16  0.60    0.59   NA   NA   NA     NA      NA      NA      NA</span>
<span class="co">#&gt; 8  1995-03-23  0.85    0.87   NA   NA   NA     NA      NA      NA      NA</span>
<span class="co">#&gt; 9  1995-04-03  1.47    1.28   NA   NA   NA     NA      NA      NA      NA</span>
<span class="co">#&gt; 10 1995-04-11  2.37    2.68   NA   NA   NA     NA      NA      NA      NA</span>
<span class="co">#&gt; 11 1995-04-18  2.65    3.70   NA   NA   NA     NA      NA      NA      NA</span>
<span class="co">#&gt; 12 1995-04-26  4.55    4.67   NA   NA   NA     NA      NA      NA      NA</span>
<span class="co">#&gt; 13 1995-05-02  4.41    5.77   NA   NA   NA     NA      NA      NA      NA</span>
<span class="co">#&gt; 14 1995-05-05    NA    6.01   NA   NA   NA     NA      NA      NA      NA</span>
<span class="co">#&gt; 15 1995-05-09  5.20    7.51   NA   NA   NA     NA      NA      NA      NA</span>
<span class="co">#&gt; 16 1995-05-12    NA    9.73   NA   NA   NA     NA      NA      NA      NA</span>
<span class="co">#&gt; 17 1995-05-15  5.98    9.87   NA   NA   NA     NA      NA      NA      NA</span>
<span class="co">#&gt; 18 1995-05-19    NA   11.08   NA   NA   NA     NA      NA      NA      NA</span>
<span class="co">#&gt; 19 1995-05-29    NA   14.08   NA   NA   NA     NA      NA      NA      NA</span>
<span class="co">#&gt; 20 1995-07-17    NA   21.91   NA   NA   NA     NA      NA      NA      NA</span>
<span class="co">#&gt;    QNplante   Plant</span>
<span class="co">#&gt; 1      9.24 plant_1</span>
<span class="co">#&gt; 2        NA plant_1</span>
<span class="co">#&gt; 3     10.85 plant_1</span>
<span class="co">#&gt; 4     12.61 plant_1</span>
<span class="co">#&gt; 5     13.32 plant_1</span>
<span class="co">#&gt; 6     16.65 plant_1</span>
<span class="co">#&gt; 7     24.59 plant_1</span>
<span class="co">#&gt; 8     38.86 plant_1</span>
<span class="co">#&gt; 9     60.99 plant_1</span>
<span class="co">#&gt; 10    98.98 plant_1</span>
<span class="co">#&gt; 11   103.36 plant_1</span>
<span class="co">#&gt; 12   141.99 plant_1</span>
<span class="co">#&gt; 13   170.03 plant_1</span>
<span class="co">#&gt; 14       NA plant_1</span>
<span class="co">#&gt; 15   188.57 plant_1</span>
<span class="co">#&gt; 16       NA plant_1</span>
<span class="co">#&gt; 17   216.06 plant_1</span>
<span class="co">#&gt; 18       NA plant_1</span>
<span class="co">#&gt; 19   258.38 plant_1</span>
<span class="co">#&gt; 20   258.45 plant_1</span>

<span class="va">sim_options</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/stics_wrapper_options.html">stics_wrapper_options</a></span><span class="op">(</span>javastics_path <span class="op">=</span> <span class="va">javastics_path</span>, 
                                     data_dir <span class="op">=</span> <span class="va">output_path</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; v Using stics: 'D:/Home/sbuis/Documents/WORK/STICS/JavaSTICS-1.41-stics-9.0/bin/stics_modulo.exe'</span>

<span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/stics_wrapper.html">stics_wrapper</a></span><span class="op">(</span>model_options <span class="op">=</span> <span class="va">sim_options</span>, sit_var_dates_mask <span class="op">=</span> <span class="va">obs_list</span><span class="op">)</span>
<span class="co">#&gt; v Using stics: 'D:/Home/sbuis/Documents/WORK/STICS/JavaSTICS-1.41-stics-9.0/bin/stics_modulo.exe'</span>
<span class="co">#&gt; Warning in e$fun(obj, substitute(ex), parent.frame(), e$data): already exporting</span>
<span class="co">#&gt; variable(s): force_param_values</span>
<span class="co">#&gt; Warning: Requested date(s) 1996-04-16 is(are) not simulated for USM maize</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">results</span><span class="op">)</span>
<span class="co">#&gt; $error</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $sim_list</span>
<span class="co">#&gt; $maize</span>
<span class="co">#&gt;          Date    lai_n  masec_n mafruit AZnit_1 AZnit_2 AZnit_3 QNplante</span>
<span class="co">#&gt; 1  1996-05-14 0.000484 6.92e-05   0.000   69.20  90.300  18.700     0.06</span>
<span class="co">#&gt; 2  1996-06-11 0.528000 3.46e-01   0.000   39.70 102.000  37.500    11.40</span>
<span class="co">#&gt; 3  1996-06-19 1.200000 1.46e+00   0.000   31.20  93.100  37.300    34.80</span>
<span class="co">#&gt; 4  1996-06-26 1.770000 2.30e+00   0.000   27.10  81.700  36.200    57.50</span>
<span class="co">#&gt; 5  1996-07-02 2.450000 3.56e+00   0.000   22.50  68.000  33.700    81.80</span>
<span class="co">#&gt; 6  1996-07-05 2.780000 3.94e+00   0.000   16.30  72.900  32.400    89.10</span>
<span class="co">#&gt; 7  1996-07-15 4.040000 6.17e+00   0.000    8.38  52.800  33.400   125.00</span>
<span class="co">#&gt; 8  1996-07-24 5.800000 9.18e+00   0.000    7.94  35.400  30.000   163.00</span>
<span class="co">#&gt; 9  1996-07-25 5.800000 9.47e+00   0.000    8.21  34.400  30.100   167.00</span>
<span class="co">#&gt; 10 1996-08-02 5.800000 1.16e+01   0.000    8.44  26.300  23.100   196.00</span>
<span class="co">#&gt; 11 1996-08-09 5.800000 1.32e+01   0.000    7.55  19.300  23.200   215.00</span>
<span class="co">#&gt; 12 1996-08-14 5.800000 1.42e+01   0.000    5.92  14.900  20.500   226.00</span>
<span class="co">#&gt; 13 1996-08-20 5.800000 1.58e+01   0.808    6.69   9.750  14.100   244.00</span>
<span class="co">#&gt; 14 1996-09-03 5.780000 1.84e+01   4.010    4.80   4.510   5.820   273.00</span>
<span class="co">#&gt; 15 1996-09-12 5.460000 2.03e+01   6.550    4.05   2.440   3.540   288.00</span>
<span class="co">#&gt; 16 1996-10-15 4.260000 2.34e+01  13.800    1.98   0.661   0.963   316.00</span>
<span class="co">#&gt; 17 1996-10-23 3.550000 2.40e+01  14.900    1.95   0.581   0.719   320.00</span>
<span class="co">#&gt;      Plant</span>
<span class="co">#&gt; 1  plant_1</span>
<span class="co">#&gt; 2  plant_1</span>
<span class="co">#&gt; 3  plant_1</span>
<span class="co">#&gt; 4  plant_1</span>
<span class="co">#&gt; 5  plant_1</span>
<span class="co">#&gt; 6  plant_1</span>
<span class="co">#&gt; 7  plant_1</span>
<span class="co">#&gt; 8  plant_1</span>
<span class="co">#&gt; 9  plant_1</span>
<span class="co">#&gt; 10 plant_1</span>
<span class="co">#&gt; 11 plant_1</span>
<span class="co">#&gt; 12 plant_1</span>
<span class="co">#&gt; 13 plant_1</span>
<span class="co">#&gt; 14 plant_1</span>
<span class="co">#&gt; 15 plant_1</span>
<span class="co">#&gt; 16 plant_1</span>
<span class="co">#&gt; 17 plant_1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $wheat</span>
<span class="co">#&gt;          Date lai_n masec_n HR_1 HR_2 HR_3 resmes AZnit_1 AZnit_2 AZnit_3</span>
<span class="co">#&gt; 1  1995-01-30 0.705   0.158 24.5 24.5 21.5    192   0.391   0.444   3.250</span>
<span class="co">#&gt; 2  1995-02-03 0.777   0.227 24.5 24.5 21.5    192   0.408   0.378   2.670</span>
<span class="co">#&gt; 3  1995-02-07 0.849   0.270 23.9 24.4 21.5    191   0.389   0.319   2.400</span>
<span class="co">#&gt; 4  1995-02-16 1.080   0.496 24.5 24.5 21.5    192   0.521   0.297   1.540</span>
<span class="co">#&gt; 5  1995-02-24 1.320   0.739 24.5 24.5 21.5    192  23.700   6.400   2.080</span>
<span class="co">#&gt; 6  1995-03-06 1.880   1.340 24.3 24.4 21.5    192   8.800   4.830   1.640</span>
<span class="co">#&gt; 7  1995-03-16 2.370   2.120 23.4 23.2 21.3    187   2.020   3.940   1.580</span>
<span class="co">#&gt; 8  1995-03-23 2.570   2.640 22.1 23.8 21.4    186  75.900   2.940   1.900</span>
<span class="co">#&gt; 9  1995-04-03 2.990   3.750 19.7 21.8 21.0    176  62.300   2.640   1.400</span>
<span class="co">#&gt; 10 1995-04-11 3.250   5.120 14.7 20.2 20.4    161  47.100   2.500   1.100</span>
<span class="co">#&gt; 11 1995-04-18 3.000   5.830 19.7 18.9 19.6    163  42.500   2.440   0.901</span>
<span class="co">#&gt; 12 1995-04-26 2.470   6.660 24.5 24.5 21.3    191  18.800  11.500   2.790</span>
<span class="co">#&gt; 13 1995-05-02 2.060   7.430 21.7 23.8 21.4    185  84.400  14.900   3.320</span>
<span class="co">#&gt; 14 1995-05-05 1.920   8.260 18.3 23.0 21.2    177  75.600  13.000   3.110</span>
<span class="co">#&gt; 15 1995-05-09 1.680   9.240 14.9 21.9 20.8    166  67.300  11.100   2.840</span>
<span class="co">#&gt; 16 1995-05-12 1.450   9.630 24.5 24.5 21.5    192  38.500  25.700  11.300</span>
<span class="co">#&gt; 17 1995-05-15 1.360   9.970 22.4 24.1 21.4    187  29.100  26.500  14.700</span>
<span class="co">#&gt; 18 1995-05-19 1.130  10.500 22.9 23.9 21.4    188  18.700  25.800  18.900</span>
<span class="co">#&gt; 19 1995-05-29 0.512  11.700 18.5 22.7 21.1    176   9.880  21.500  17.700</span>
<span class="co">#&gt; 20 1995-07-17 0.000  11.700 21.8 24.3 21.5    187  11.700  19.500  30.200</span>
<span class="co">#&gt;    QNplante   Plant</span>
<span class="co">#&gt; 1      5.61 plant_1</span>
<span class="co">#&gt; 2      6.26 plant_1</span>
<span class="co">#&gt; 3      6.91 plant_1</span>
<span class="co">#&gt; 4      8.65 plant_1</span>
<span class="co">#&gt; 5     15.20 plant_1</span>
<span class="co">#&gt; 6     33.60 plant_1</span>
<span class="co">#&gt; 7     43.10 plant_1</span>
<span class="co">#&gt; 8     46.70 plant_1</span>
<span class="co">#&gt; 9     63.50 plant_1</span>
<span class="co">#&gt; 10    80.80 plant_1</span>
<span class="co">#&gt; 11    87.10 plant_1</span>
<span class="co">#&gt; 12   102.00 plant_1</span>
<span class="co">#&gt; 13   117.00 plant_1</span>
<span class="co">#&gt; 14   129.00 plant_1</span>
<span class="co">#&gt; 15   141.00 plant_1</span>
<span class="co">#&gt; 16   148.00 plant_1</span>
<span class="co">#&gt; 17   154.00 plant_1</span>
<span class="co">#&gt; 18   162.00 plant_1</span>
<span class="co">#&gt; 19   180.00 plant_1</span>
<span class="co">#&gt; 20   182.00 plant_1</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; attr(,"class")</span>
<span class="co">#&gt; [1] "cropr_simulation"</span></code></pre></div>
<p>Some warnings may occur, as in this case (that is why <code>results$error</code> is TRUE), indicating that observed variables and/or observations dates are missing in simulated data. Concerning the dates, this may be due to the USMs simulation period that may not include observed dates. For the variables, this may be due to an incorrect spelling of the variables in obs_list.</p>
</div>
<div id="simulations-with-forcing-parameters" class="section level4">
<h4 class="hasAnchor">
<a href="#simulations-with-forcing-parameters" class="anchor"></a>Simulations with forcing parameters</h4>
<ul>
<li>Applying a single parameter values vector for all the selected usms</li>
</ul>
<p>Parameters values are prescribed using the <code>param_values</code> argument. It can be a named vector containing the values and names of the parameters to force. In this case, the same values will be applied for all the simulated usms.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">param_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.002</span>,<span class="fl">50</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">param_values</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"dlaimax"</span>, <span class="st">"durvieF"</span><span class="op">)</span>

<span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/stics_wrapper.html">stics_wrapper</a></span><span class="op">(</span>model_options <span class="op">=</span> <span class="va">sim_options</span>, sit_names <span class="op">=</span> <span class="va">usms_list</span>, param_values <span class="op">=</span> <span class="va">param_values</span><span class="op">)</span></code></pre></div>
<ul>
<li>Defining different parameters values depending on the usms</li>
</ul>
<p><code>param_values</code> can also be a data.frame or a tibble having one named column per parameter and an optional column named Situation containing the name of the situations (USMs for Stics) that allows to define different values of the parameters for different situations.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R">
<span class="co"># Let's run usm wheat with c(dlaimax=0.001, durvieF=50),</span>
<span class="co"># usm pea with c(dlaimax=0.001, durvieF=60),</span>
<span class="co"># and usm maize with c(dlaimax=0.001, durvieF=70)</span>
<span class="va">param_values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>Situation<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"wheat"</span>, <span class="st">"pea"</span>, <span class="st">"maize"</span><span class="op">)</span>,
                           dlaimax<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0.001</span>,<span class="fl">0.001</span>,<span class="fl">0.001</span><span class="op">)</span>,
                           durvieF<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">50</span>,<span class="fl">60</span>,<span class="fl">70</span><span class="op">)</span><span class="op">)</span>

<span class="co"># Let's display it</span>
<span class="va">param_values</span>
<span class="co">#&gt;   Situation dlaimax durvieF</span>
<span class="co">#&gt; 1     wheat   0.001      50</span>
<span class="co">#&gt; 2       pea   0.001      60</span>
<span class="co">#&gt; 3     maize   0.001      70</span>

<span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/stics_wrapper.html">stics_wrapper</a></span><span class="op">(</span>model_options <span class="op">=</span> <span class="va">sim_options</span>, param_values <span class="op">=</span> <span class="va">param_values</span>, sit_names<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"wheat"</span>, <span class="st">"pea"</span>, <span class="st">"maize"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; v Using stics: 'D:/Home/sbuis/Documents/WORK/STICS/JavaSTICS-1.41-stics-9.0/bin/stics_modulo.exe'</span></code></pre></div>
</div>
<div id="simulations-in-successive-mode" class="section level4">
<h4 class="hasAnchor">
<a href="#simulations-in-successive-mode" class="anchor"></a>Simulations in successive mode</h4>
<p>USMs can be run in successive mode, if they are adequately defined (i.e. if the beginning and end of simulations are consistent), using the option <code>successive_usms</code>.</p>
<p><code>successive_usms</code> is a list of vectors containing the names of the UMSs to consider as successive (e.g. <code><a href="https://rdrr.io/r/base/list.html">list(c("usm1.1","usm1.2"),c("usm2.1","usm2.2"))</a></code> defines 2 successions usm1.1-&gt;usm1.2 and usm2.1-&gt;usm2.2).</p>
</div>
<div id="other-optional-arguments" class="section level4">
<h4 class="hasAnchor">
<a href="#other-optional-arguments" class="anchor"></a>Other Optional arguments</h4>
<ul>
<li>Displaying execution time</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sim_options</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/stics_wrapper_options.html">stics_wrapper_options</a></span><span class="op">(</span>javastics_path <span class="op">=</span> <span class="va">javastics_path</span>, 
                                     data_dir <span class="op">=</span> <span class="va">output_path</span>, time_display <span class="op">=</span> <span class="cn">TRUE</span>,
                                     verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/stics_wrapper.html">stics_wrapper</a></span><span class="op">(</span>model_options <span class="op">=</span> <span class="va">sim_options</span><span class="op">)</span>
<span class="co">#&gt; Warning in e$fun(obj, substitute(ex), parent.frame(), e$data): already exporting</span>
<span class="co">#&gt; variable(s): force_param_values</span>
<span class="co">#&gt; Time difference of 1.85208 mins</span></code></pre></div>
<ul>
<li>Activating parallel execution</li>
</ul>
<p>On may specify the number of cores to use with the cores argument.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sim_options</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/stics_wrapper_options.html">stics_wrapper_options</a></span><span class="op">(</span>javastics_path <span class="op">=</span> <span class="va">javastics_path</span>, 
                                     data_dir <span class="op">=</span> <span class="va">output_path</span>,
                                     parallel <span class="op">=</span><span class="cn">TRUE</span>, time_display <span class="op">=</span> <span class="cn">TRUE</span>,
                                     cores <span class="op">=</span> <span class="fl">2</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/stics_wrapper.html">stics_wrapper</a></span><span class="op">(</span>model_options <span class="op">=</span> <span class="va">sim_options</span><span class="op">)</span>
<span class="co">#&gt; Warning in e$fun(obj, substitute(ex), parent.frame(), e$data): already exporting</span>
<span class="co">#&gt; variable(s): force_param_values</span>
<span class="co">#&gt; Time difference of 54.72628 secs</span></code></pre></div>
<p>If cores is not given, parallel execution is performed over machine total cores number minus 1.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">parallel</span><span class="op">)</span>

<span class="co"># Used cores number</span>
<span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html">detectCores</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span>
<span class="co">#&gt; [1] 3</span>

<span class="va">sim_options</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/stics_wrapper_options.html">stics_wrapper_options</a></span><span class="op">(</span>javastics_path <span class="op">=</span> <span class="va">javastics_path</span>, 
                                     data_dir <span class="op">=</span> <span class="va">output_path</span>, parallel <span class="op">=</span><span class="cn">TRUE</span>,
                                     time_display <span class="op">=</span> <span class="cn">TRUE</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/stics_wrapper.html">stics_wrapper</a></span><span class="op">(</span>model_options <span class="op">=</span> <span class="va">sim_options</span><span class="op">)</span>
<span class="co">#&gt; Warning in e$fun(obj, substitute(ex), parent.frame(), e$data): already exporting</span>
<span class="co">#&gt; variable(s): force_param_values</span>
<span class="co">#&gt; Time difference of 53.54526 secs</span></code></pre></div>
</div>
</div>
</div>
<div id="citation" class="section level2">
<h2 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h2>
<p>If you have used this package for a study that led to a publication or report, please cite us. To get the suggested citation, run <code><a href="https://rdrr.io/r/utils/citation.html">citation("SticsOnR")</a></code>.</p>
</div>
<div id="code-of-conduct" class="section level2">
<h2 class="hasAnchor">
<a href="#code-of-conduct" class="anchor"></a>Code of conduct</h2>
<p>Please note that this project is released with a <a href="CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>
<p>The package is under intensive development, so you can fill an issue or request us a feature <a href="https://github.com/SticsRPacks/SticsOnR/issues">here</a> at any time.</p>
</div>
<div id="authors-and-acknowledgments" class="section level2">
<h2 class="hasAnchor">
<a href="#authors-and-acknowledgments" class="anchor"></a>Authors and acknowledgments</h2>
<p>The SticsOnR package is developed by Patrice Lecharpentier, Rémi Vezy and the <a href="https://github.com/orgs/SticsRPacks/teams/sticsonr">SticsOnR Team</a>.</p>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/SticsRPacks/SticsOnR/">https://​github.com/​SticsRPacks/​SticsOnR/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/SticsRPacks/SticsOnR/issues">https://​github.com/​SticsRPacks/​SticsOnR/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Patrice Lecharpentier <br><small class="roles"> Author, maintainer </small>  </li>
<li>Remi Vezy <br><small class="roles"> Author </small>  </li>
<li>SticsRPacks <br><small class="roles"> Author, copyright holder </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#wip"><img src="https://www.repostatus.org/badges/latest/wip.svg" alt="Project Status: WIP – Initial development is in progress, but there has not yet been a stable, usable release suitable for the public."></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Patrice Lecharpentier, Remi Vezy, SticsRPacks.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
